<div style="display: flex;justify-content: center;align-items: center;padding-bottom: 30px">


    <div class="col-md-9 col-md-offset-3" style="padding-bottom: 30px">

        <div class="card border-dark container" style=" text-align: center;">

            <div class="preview text-center" id="preview" style="display: flex;justify-content: center;align-items: center; padding-top: 15px; padding-bottom: 15px;">
                <div class="card col-md-12" id="card-msg">


                </div>
            </div>

            <div class="col-md-12" style="text-align: center;">
                <h3 style="color: #20488f;font-size: 30px;font-weight: bold;" class="">Editar Linea de Acción.
                </h3>
            </div>

            <form id="formulario" enctype="multipart/form-data" method="POST">

                <div class="form-group row">
                    <label class="col-2 col-form-label" for="linea_accion" style="font-weight: bold;"> Linea
                        de acción: </label>
                    <div class="col-10">
                        <input class="form-control" type="text" placeholder="linea de accón" name="linea_accion" id="linea_accion" value="<%= info_linea[0].linea_accion %>">
                    </div>
                </div>

                <div class="form-group row">
                    <label class="col-2 col-form-label" for="select_plan" style="font-weight: bold;">Plan
                        general: </label>

                    <div class="col-10">
                        <select class="form-control" name="select_plan" id="select_plan" data-toggle="tooltip" title="Seleccionar plan General!" data-placement="right" required>
                                                     
                                                    
                            <% planes_generales.forEach(lista=> { %>
                                <% if (lista.estado) { %>

                                    <% if (info_linea[0].id_plangeneral == lista.id_plangeneral) { %>
                                        <option selected="selected" value="<%= info_linea[0].id_plangeneral %>">
                                            <%= info_linea[0].plan_general %>
                                        </option>
                                    <% }else{ %>
                                     
                                    <option value="<%= lista.id_plangeneral %>">
                                        <%= lista.plan_general %>
                                    </option>   
                                <% }} %>

                                
                                
                                <% }); %>
                        </select>
                    </div>
                </div>

                <div class="form-group row" style="display: flex;justify-content: center;align-items: center;margin-top: 10px;">
                    <div class="text-center">
                        <button style="font-weight: bold;" class="btn btn-success " id="btn-validar" name="btn-validar" onclick="almacenar_registro()">Actualizar</button>
                    </div>
                </div>
        </div>

        </form>
    </div>
</div>
</div>

<script type="text/javascript">
    function actualizar_registro() {
        event.preventDefault();
        var id_plan = $('#id_plan').val();
        var nombre_plan = $('#nombre_plan').val();
        var fecha_ini = $('#txtfecha_inicial').val();
        var fecha_fin = $('#txtfecha_fin').val();
        var checkbox = document.getElementById('is_active');
        var activo = false;
        if (checkbox.checked) {
            //alert('esta marcado...');
            activo = true;
        }


        var peticion = "/actualizar-plan-general/?id_plan=" + id_plan + "&nombre_plan=" + nombre_plan + "&fecha_inicial=" + fecha_ini + "&fecha_fin=" + fecha_fin + "&activo=" + activo;

        $.ajax({
            type: 'post',
            url: peticion,
            data: [],

            success: function(result) {

                //history.replaceState("/config-entidades", "Nueva Entidad Bips", "/config-entidades");

                /*setTimeout(function() {
                    window.location.reload(1);
                }, 5000);*/
                if (result["status"] == 200) {

                    console.log("actualizado correctamente...");
                    //history.replaceState("/form-editar-entidad", "Editar Entidad Bips", "/form-editar-entidad");
                    $('#preview').show();

                    $('#card-msg').html("<div style='' class='card-header text-white bg-success mb-3 container-fluid' id='btn-cerrar'><strong>OK!</strong><button type='button' class='close' aria-label='Close'> <span aria-hidden='true'>&times;</span></button></div><div class='card-body-ok' id='card-body-ok'>" + result["msg"] + "</div>");

                    $('#card-msg').show();

                    setTimeout(function() {
                        $('#preview').hide();
                    }, 5000);

                } else {
                    $('#preview').show();

                    $('#card-msg').html("<div style='' class='card-header text-white bg-danger mb-3 container-fluid' id='btn-cerrar'><strong>Error!</strong><button type='button' class='close' aria-label='Close'> <span aria-hidden='true'>&times;</span></button></div><div class='card-body-ok' id='card-body-ok'>" + result["msg"] + "</div>");

                    $('#card-msg').show();

                    setTimeout(function() {
                        $('#preview').hide();
                    }, 5000);

                    //$('#formulario')[0].reset();

                    //$('#cod_entidad').focus();

                }

                //$('#body_ent').html(result);


            }

        });


    }

    $(document).ready(function() {

        $('#preview').hide();



    });
</script>