<%- include("head"); %>
    <%- include("styles_gral"); %>

        <div class="col-md-12" id="" name="" style="margin-top: 0px;">


            <div class="col-md-12" id="body_ent" name="body_ent">

                <div id="preview" name="preview">

                    <% const m=getMessages() %>

                        <% if (m.notify_del_objetivo) { %>


                            <% m.notify_del_objetivo.forEach((element)=> { %>

                                <script type="text/javascript">
                                    alert('<%= element %>');
                                </script>

                                <% }) %> %>

                                    <% } %>
                                        <% if (m.error) { %>

                                            <% } %>
                </div>

                <div>
                    <span class="titulo-tabla" style="font-weight: bold;text-align: left;">
                        <h2> Objetivos</h2>
                    </span>
                </div>



                <div class="table-responsive">

                    <table class="table table-striped table-bordered" id="tbl_planos">


                        <thead class="head-tabla-reg">
                            <tr>
                                <th>#</th>
                                <th>Objetivo</th>
                                <th>Linea de Acci√≥n</th>
                                <th>Plan General</th>
                                <th>Acciones</th>

                            </tr>
                        </thead>
                        <tbody id="developers">
                            <% for(var i=0; i<lista_objetivos.length; i++) { %>

                                <tr class="text-center">
                                    <td>
                                        <%= i+1 %>

                                    </td>
                                    <td>
                                        <%= lista_objetivos[i].objetivo %>
                                    </td>

                                    <td>
                                        <%= lista_objetivos[i].desc_linea_accion %>

                                    </td>
                                    <td>
                                        <%= lista_objetivos[i].plan_general %>

                                    </td>

                                    <td class="btns-acciones">
                                        <a href="" title="Editar" onclick="editar_objetivo('<%= lista_objetivos[i].id_objetivo %>')"><i class="fas fa-edit"></i></a>
                                        <a href="/eliminar-popup-objetivo/<%= lista_objetivos[i].id_objetivo %>/control-mando-bips/?nombre_objetivo=<%= lista_objetivos[i].objetivo %>" title="Eliminar" style="color: red;"><i class="far fa-trash-alt"></i></a>
                                    </td>

                                </tr>
                                <% }%>
                        </tbody>
                        <tfoot>

                        </tfoot>
                    </table>

                </div>
            </div>



            <script type="text/javascript">
                $(document).ready(function() {

                });


                function editar_objetivo(id_objetivo) {

                    event.preventDefault();

                    //alert("ok desde lista plan general");

                    const peticion = "/form-editar-ctm-objetivo/?id_objetivo=" + id_objetivo;

                    $.ajax({
                        type: 'post',
                        url: peticion,
                        data: [],
                        contentType: false,
                        cache: false,
                        processData: false,

                        success: function(result) {

                            //history.replaceState("/form-editar-entidad", "Editar Entidad Bips", "/form-editar-entidad");
                            $('#preview').hide();
                            $('#body_ent').html(result);


                        }

                    });

                }
            </script>


            <style>
                body {
                    /*background-color: #eaedee;*/
                    overflow-x: auto;
                    overflow-y: auto;
                }
                
                body::-webkit-scrollbar {
                    display: auto;
                    overflow-y: hidden;
                }
                
                #tbl_planos {
                    font-size: small;
                    font-family: 'Montserrat', sans-serif;
                    border-spacing: 0px !important;
                    padding: 0px;
                }
                
                #tbl_planos th {
                    padding: 7px;
                }
                
                #tbl_planos td {
                    padding: 0;
                }
                
                .btns-acciones form .btn-submit {
                    font-family: 'Montserrat', sans-serif;
                    border-radius: 5px;
                    font-size: 10px;
                    border: none;
                    cursor: pointer;
                    transition: .3s ease all;
                    font-weight: bold;
                }
                
                #btn-elim-all {
                    font-family: 'Montserrat', sans-serif;
                    border-radius: 5px;
                    font-size: 10px;
                    border: none;
                    cursor: pointer;
                    transition: .3s ease all;
                }
                
                .head-tabla-reg {
                    background-color: #3f78da;
                    color: #fff;
                }
                
                .titulo-tabla {
                    color: #20488f;
                }
            </style>