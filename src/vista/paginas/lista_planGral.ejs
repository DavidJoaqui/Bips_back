<%- include("head"); %>
    <%- include("styles_gral"); %>

        <style>
            body {
                /*background-color: #eaedee;*/
                overflow-x: auto;
                overflow-y: auto;
            }
            
            body::-webkit-scrollbar {
                display: auto;
                overflow-y: hidden;
            }
        </style>


        <div class="col-md-12" id="body_ent" name="body_ent" style="margin-top: 10px;">


            <div class="col-md-12">

                <div>
                    <span class="titulo-tabla" style="font-weight: bold;text-align: left;">
                        <h2> Planes Generales</h2>
                    </span>
                </div>

                <p type="text" id="loading" value="" hidden>loading...</p>
                <div class="table-responsive">

                    <table class="table table-striped table-bordered" style="width:100%" id="tbl_planos">


                        <thead class="head-tabla-reg">
                            <tr>
                                <th>#</th>
                                <th>Nombre plan</th>
                                <th>Fecha Inicio</th>
                                <th>Fecha Fin</th>
                                <th>Activo</th>
                                <th>Acciones</th>


                            </tr>
                        </thead>
                        <tbody id="developers">
                            <% for(var i=0; i<lista_planes.length; i++) { %>

                                <tr class="text-center">
                                    <td>
                                        <%= i+1 %>

                                    </td>
                                    <td>
                                        <%= lista_planes[i].plan_general %>
                                    </td>

                                    <td>
                                        <%= lista_planes[i].fecha_inicial  %>
                                    </td>

                                    <td>
                                        <%= lista_planes[i].fecha_final %>
                                    </td>

                                    <td>
                                        <% if (lista_planes[i].estado) { %>
                                            <i class='fas fa-check-circle' style='color: green;'></i>Si
                                            <% } else { %>
                                                <i class="fas fa-minus-circle" style='color: red;'></i>No
                                                <% } %>


                                    </td>

                                    <td class="btns-acciones">
                                        <a href="" title="Editar" onclick="editar_plan('<%= lista_planes[i].id_plangeneral %>')"><i class="fas fa-edit"></i></a>
                                        <a href="" title="Eliminar" onclick="eliminar_plan('<%= lista_planes[i].id_plangeneral %>')" style="color: red;"><i class="far fa-trash-alt"></i></a>
                                    </td>

                                </tr>
                                <% }%>
                        </tbody>
                        <tfoot>

                        </tfoot>
                    </table>

                </div>
            </div>

        </div>

        <style>
            #tbl_planos {
                font-size: small;
                font-family: 'Montserrat', sans-serif;
                border-spacing: 0px !important;
                padding: 0px;
            }
            
            #tbl_planos th {
                padding: 7px;
            }
            
            #tbl_planos td {
                padding: 0;
            }
            
            .btns-acciones form .btn-submit {
                font-family: 'Montserrat', sans-serif;
                border-radius: 5px;
                font-size: 10px;
                border: none;
                cursor: pointer;
                transition: .3s ease all;
                font-weight: bold;
            }
            
            #btn-elim-all {
                font-family: 'Montserrat', sans-serif;
                border-radius: 5px;
                font-size: 10px;
                border: none;
                cursor: pointer;
                transition: .3s ease all;
            }
            
            .head-tabla-reg {
                background-color: #3f78da;
                color: #fff;
            }
            
            .titulo-tabla {
                color: #20488f;
            }
        </style>


        <script type="text/javascript">
            function editar_plan(id_plan) {

                event.preventDefault();

                //alert("ok desde lista plan general");

                const peticion = "/form-editar-ctm-plan-general/?id_plan=" + id_plan;

                $.ajax({
                    type: 'post',
                    url: peticion,
                    data: [],
                    contentType: false,
                    cache: false,
                    processData: false,

                    success: function(result) {

                        //history.replaceState("/form-editar-entidad", "Editar Entidad Bips", "/form-editar-entidad");
                        $('#body_ent').html(result);


                    }

                });

            }
        
            function eliminar_plan(id_plan){
                alert('accion Eliminar '+id_plan);
            }
        
        </script>